# CLI Projects Scan Report - 2026-02-20

## Executive Summary

This report provides a comprehensive analysis of two CLI projects in the AI-VIBE-ECOSYSTEM:
- **AI-VIBE-CLI-PYTHON** (Friday AI Teammate) - Enterprise-grade Python CLI
- **AI-VIBE-CLI-TypeScript** (VIBE CLI) - Modern TypeScript CLI

Both projects are functional but have areas needing attention for production readiness.

---

## AI-VIBE-CLI-PYTHON (Friday AI Teammate)

### Status: PRODUCTION READY with Minor Issues

### Purpose
Friday AI Teammate is a comprehensive, enterprise-grade AI coding assistant CLI tool providing:
- 16+ built-in tools (file, shell, git, docker, database, HTTP, web search)
- Multi-provider LLM support (OpenAI, Anthropic, Google, Groq, Ollama)
- .claude folder integration (13 agents, 18 skills, 18 commands, 7 rules, 4 workflows)
- Autonomous development mode (Ralph-inspired)
- MCP (Model Context Protocol) integration
- Voice I/O support
- Kubernetes integration
- RAG system for codebase intelligence
- REST API server (FastAPI)
- Enterprise features (audit logging, retry policies, health checks, connection pooling)

### Features Implemented

| Feature | Status | Notes |
|---------|--------|-------|
| **Core CLI** | ✅ Complete | `friday` command working |
| **Multi-Provider LLM** | ✅ Complete | 5 providers supported |
| **Autonomous Mode** | ✅ Complete | Circuit breaker, rate limiting, session persistence |
| **16 Built-in Tools** | ✅ Complete | File, shell, git, docker, database, HTTP, search |
| **.claude Integration** | ✅ Complete | Agents, skills, commands, rules, workflows |
| **MCP Support** | ✅ Complete | 15+ pre-configured servers |
| **Session Management** | ✅ Complete | Save/resume/checkpoint |
| **Security Features** | ✅ Complete | Secret scrubbing, approval policies, audit logging |
| **Voice I/O** | ✅ Complete | SpeechRecognition, pyttsx3, gTTS |
| **Kubernetes Integration** | ✅ Complete | Pod management, logs, exec, scale |
| **RAG System** | ✅ Complete | Semantic code search, embeddings |
| **REST API** | ✅ Complete | FastAPI with SSE streaming |
| **Agent Swarm** | ✅ Complete | Hierarchical agents, parallel execution |

### Issues Found

#### CRITICAL: None

#### HIGH: Test Coverage Below Threshold
- **Issue:** Coverage at 30.17%, far below 80% requirement
- **Location:** Test suite
- **Details:**
  - `tests/test_autonomous_mode.py` - Test classes have `__init__` constructors (pytest warning)
  - `tests/test_embeddings.py` - Same issue
  - Many modules have 0% coverage:
    - `friday_ai/agent/agent.py` - 0%
    - `friday_ai/agent/persistence.py` - 0%
    - `friday_ai/claude_integration/skills/*` - 0%
    - `friday_ai/client/llm_client.py` - 9.49%
    - `friday_ai/api/__main__.py` - 0%

#### MEDIUM: Unimplemented TODOs
- **File:** `friday_ai/api/routers/runs.py:94`
  - `_cleanup_task = None  # TODO: Start this in app lifespan`
- **File:** `friday_ai/api/routers/tools.py:67`
  - `cwd="/tmp",  # TODO: Get from session or config`

#### LOW: Pytest Collection Warnings
- Test classes with `__init__` constructors cannot be collected
- Affected: `TestResponseAnalyzer`, `TestCircuitBreaker`, `TestRateLimiter`, `TestSessionManager`, `TestAutonomousLoop`, `TestEmbeddingBackend`, `TestEmbeddingService`

### Dead Code to Remove

| File | Issue | Recommendation |
|------|-------|----------------|
| `friday_ai/claude_integration/skills/installer.py` | 0% coverage, 522 lines | Verify if remote skill installation is used |
| `friday_ai/claude_integration/skills/registry.py` | 0% coverage, 338 lines | Verify if registry is actively used |
| `friday_ai/claude_integration/skills/remote_client.py` | 0% coverage, 396 lines | Verify if remote client is needed |
| `friday_ai/agent/persistence.py` | 0% coverage, 159 lines | May be merged with session_manager.py |

### Fixes Needed

1. **Fix Test Class Constructors** (HIGH)
   - File: `tests/test_autonomous_mode.py`
   - File: `tests/test_embeddings.py`
   - Change `__init__` methods to `setup_method` for pytest compatibility

2. **Improve Test Coverage** (HIGH)
   - Add tests for core agent module (`friday_ai/agent/agent.py`)
   - Add tests for persistence layer
   - Add tests for skills installer/registry

3. **Implement TODO Items** (MEDIUM)
   - Start cleanup task in API lifespan
   - Get working directory from session config

4. **Remove or Document Zero-Coverage Code** (MEDIUM)
   - Skills installer/registry either need tests or should be documented as optional

### Documentation Needed

- **README.md** - Excellent, comprehensive
- **Missing:**
  - Troubleshooting guide for common issues
  - Migration guide for v1.x to v2.x
  - API authentication documentation

### Code Quality Notes

**Strengths:**
- Well-organized architecture with clear separation of concerns
- Comprehensive error handling with custom error types
- Type hints throughout
- Async/await for I/O operations
- Enterprise patterns (circuit breaker, retry, health checks)

**Areas for Improvement:**
- Some very large files (main.py: 1511 lines, autonomous_loop.py: 986 lines)
- Test coverage needs significant improvement
- Some TODOs in production code

---

## AI-VIBE-CLI-TypeScript (VIBE CLI)

### Status: FUNCTIONAL with Test Issues

### Purpose
VIBE CLI is an opinionated AI development tool using:
- **8-Primitives Architecture:** Planning, Completion, Execution, MultiEdit, Approval, Memory, Determinism, Search, Orchestration
- **MCP-First:** Model Context Protocol for extensible context
- **Multi-Provider Support:** Anthropic Claude, OpenAI GPT, MiniMax
- **Intent-Driven:** Natural language instead of slash commands
- **Plugin System:** Extensible architecture

### Features Implemented

| Feature | Status | Notes |
|---------|--------|-------|
| **Core CLI** | ✅ Complete | `vibe` command working |
| **8 Primitives** | ✅ Complete | All primitives implemented |
| **Interactive Mode** | ✅ Complete | `runInteractive()` function |
| **Scaffolding** | ✅ Complete | Project/component generation |
| **Test Generation** | ✅ Complete | Unit test generation |
| **Bug Fixing** | ✅ Complete | `vibe fix` command |
| **Git Integration** | ✅ Complete | commit, pr, review commands |
| **Batch Processing** | ✅ Complete | `vibe batch test/fix` |
| **Checkpoint System** | ✅ Complete | Save/restore system state |
| **Plugin System** | ✅ Complete | Install, uninstall, enable, disable |
| **REST API** | ✅ Complete | Express server |
| **Database** | ✅ Complete | SQLite with repositories |
| **MCP Integration** | ✅ Complete | Enhanced MCP manager |
| **Config System** | ✅ Complete | cosmiconfig, keytar |
| **Telemetry** | ✅ Complete | Opt-in telemetry |

### Issues Found

#### CRITICAL: None

#### HIGH: Test Timeouts and Failures
- **Failed Tests:** 25 failed of 373 total
- **Test Files:** 22 failed of 37 total
- **Key Issues:**
  1. `tests/unit/primitives/loop/` - 3 test files have 0 tests (empty files?)
  2. `tests/unit/modules/testing.test.ts` - Multiple tests timing out (5s)
  3. `tests/unit/security/secrets-manager.test.ts` - Test isolation issues
     - `should return empty array when no secrets` - Expected [], got `['ANTHROPIC_API_KEY']`
     - `should clear all secrets` - Environment variable pollution
  4. `tests/unit/utils/cache.test.ts` - LRU cache implementation issue
     - `should move accessed item to most recently used` - Failed

#### MEDIUM: Console.log Statements
- **Issue:** Extensive use of `console.log` instead of structured logger
- **Locations:** Throughout codebase, especially in:
  - `src/domain/primitives/approval.ts`
  - `src/modules/base.module.ts`
  - `src/cli/command-handler.ts`
- **Impact:** Inconsistent logging, difficult production debugging

#### MEDIUM: TODO Comments in Code
- `src/commands/batch.ts:95` - `multiEdit: {} as any, // TODO: Add proper multiEdit`
- `src/cli/main.ts:193` - `configSnapshot: {} as Record<string, unknown>, // TODO: Load actual config snapshot`
- `src/core/constants.ts:233` - `EXPERIMENTAL_SANDBOX: false, // TODO: Enable when VM2 integration is complete`
- `src/core/plugin-system/security.ts:126-128` - Key management TODOs
- `src/core/plugin-system/security.ts:166` - `// TODO: Implement proper cryptographic verification`
- `src/core/plugin-system/loader.ts:88` - `const vibeVersion = '0.0.2'; // TODO: Get from package.json`

#### LOW: Deprecated Dependencies
- `glob@7.2.3` - Deprecated, contains security vulnerabilities
- `inflight@1.0.6` - Deprecated, memory leaks

### Dead Code to Remove

| File/Path | Issue | Recommendation |
|-----------|-------|----------------|
| `tests/unit/primitives/loop/loop-primitive.test.ts` | 0 tests | Add tests or remove file |
| `tests/unit/primitives/loop/response-analyzer.test.ts` | 0 tests | Add tests or remove file |
| `tests/unit/primitives/loop/circuit-breaker.test.ts` | 0 tests | Add tests or remove file |

### Fixes Needed

1. **Fix Test Timeouts** (HIGH)
   - File: `tests/unit/modules/testing.test.ts`
   - Increase timeout or fix async issues
   - Tests timing out: `run`, `coverage`, `analyze` actions

2. **Fix Test Isolation** (HIGH)
   - File: `tests/unit/security/secrets-manager.test.ts`
   - Clear environment variables before/after tests
   - Use proper test setup/teardown

3. **Fix LRU Cache** (HIGH)
   - File: `tests/unit/utils/cache.test.ts`
   - Bug in LRU cache move-to-front logic

4. **Replace console.log with Logger** (MEDIUM)
   - Use `createLogger()` from `src/utils/pino-logger.ts`
   - Replace all `console.log` calls

5. **Update Deprecated Dependencies** (MEDIUM)
   - Update `glob` to latest version
   - Remove `inflight` dependency

6. **Implement TODO Items** (MEDIUM)
   - Add proper multiEdit type to batch.ts
   - Load actual config snapshot
   - Implement plugin cryptographic verification
   - Read version from package.json dynamically

### Documentation Needed

- **README.md** - Excellent, comprehensive
- **Missing:**
  - Plugin development guide (PLUGIN-SECURITY.md exists but needs expansion)
  - Troubleshooting guide for test failures
  - Architecture diagram of 8 primitives interaction

### Code Quality Notes

**Strengths:**
- Modern TypeScript with strict type checking
- 8-primitives architecture is well-designed
- Comprehensive feature set
- Good use of dependency injection

**Areas for Improvement:**
- Large files (tui/index.ts: 1470 lines, core-types/index.ts: 1131 lines)
- Inconsistent logging (mix of console.log and pino)
- Test suite has multiple failures
- Some `any` types (batch.ts)

---

## Comparison: When to Use Each CLI

### Use Friday AI Teammate (Python) When:

1. **You need enterprise features:**
   - Audit logging with tamper-evidence
   - Circuit breakers and retry policies
   - Health checks for Kubernetes
   - Database connection pooling

2. **You prefer .claude folder integration:**
   - 13 specialized agents
   - 18 domain-specific skills
   - 18 slash commands
   - 7 coding rules
   - 4 workflows

3. **You need advanced AI features:**
   - Multi-provider LLM routing
   - Voice I/O
   - RAG for codebase intelligence
   - Kubernetes integration
   - Agent swarm mode

4. **You're in a Python environment:**
   - Easier to extend with Python packages
   - Better for Python/Go/Java codebases

### Use VIBE CLI (TypeScript) When:

1. **You prefer modern Node.js tooling:**
   - Faster iteration cycle
   - npm ecosystem
   - TypeScript type safety

2. **You want simpler architecture:**
   - 8 primitives vs complex tool system
   - Intent-driven vs command-based
   - No .claude folder complexity

3. **You're in a TypeScript/JavaScript environment:**
   - Better for React/Next.js/Vue projects
   - Easier to integrate with Node.js tools

4. **You need plugin system:**
   - Built-in plugin registry
   - Community marketplace
   - Easy distribution

## Feature Differences

| Feature | Friday (Python) | VIBE (TypeScript) |
|---------|-----------------|-------------------|
| **CLI Commands** | `/plan`, `/tdd`, `/code-review`, etc. | Natural language only |
| **Tools** | 16 built-in tools | 8 primitives |
| **LLM Providers** | 5 (OpenAI, Anthropic, Google, Groq, Ollama) | 3 (Anthropic, OpenAI, MiniMax) |
| **Test Coverage** | 30.17% (needs work) | 93% passing (but 25 failed) |
| **Plugin System** | MCP-based | Native plugin system |
| **Documentation** | Excellent | Excellent |
| **Voice I/O** | Yes | No |
| **Kubernetes** | Yes | No |
| **RAG** | Yes | Semantic search only |
| **REST API** | FastAPI | Express |
| **Database** | PostgreSQL, MySQL, SQLite | SQLite only |
| **Status** | Production Ready | Functional with test issues |

---

## Recommendations

### For Friday AI Teammate (Python):

1. **Priority 1:** Improve test coverage to 80%+
   - Fix test class constructors
   - Add tests for core modules
   - Add tests for skills installer/registry or document as optional

2. **Priority 2:** Address TODOs
   - Implement cleanup task
   - Get config from session

3. **Priority 3:** Refactor large files
   - Split `main.py` (1511 lines)
   - Split `autonomous_loop.py` (986 lines)

### For VIBE CLI (TypeScript):

1. **Priority 1:** Fix failing tests
   - Fix test timeouts in testing.test.ts
   - Fix test isolation in secrets-manager.test.ts
   - Fix LRU cache bug
   - Add tests or remove empty test files

2. **Priority 2:** Replace console.log with structured logging
   - Use pino logger consistently
   - Remove all console.log statements

3. **Priority 3:** Update dependencies
   - Update glob to latest version
   - Remove deprecated inflight

4. **Priority 4:** Implement TODO items
   - Proper multiEdit type
   - Config snapshot loading
   - Plugin cryptographic verification

---

## Summary

Both CLI tools are impressive and feature-complete. Friday AI Teammate is more enterprise-ready with better error handling and security features, but needs test coverage improvements. VIBE CLI has a cleaner architecture but needs test fixes and logging consistency.

**Recommendation:** Use Friday AI Teammate for production enterprise deployments. Use VIBE CLI for TypeScript/JavaScript projects or when plugin extensibility is important.

---

*Report generated: 2026-02-20*
*Scanned by: CLI Scanner Agent*
